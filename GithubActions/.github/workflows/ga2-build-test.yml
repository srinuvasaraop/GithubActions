name: .NET CI                         # Name of your workflow (visible in GitHub Actions UI)

# ---------------------------------------------------------
# WHEN SHOULD THIS WORKFLOW RUN?
# ---------------------------------------------------------
on:
  push:                              # Trigger the workflow on every push
    branches: [ "GA2" ]             # Only when the push happens to the 'main' branch

# ---------------------------------------------------------
# JOBS SECTION — A workflow can have multiple jobs
# Here we have only one job named 'build'
# ---------------------------------------------------------
jobs:
  build:                             # Job name (can be anything)
    runs-on: ubuntu-latest           # GitHub creates a fresh Ubuntu VM for this job

    # -----------------------------------------------------
    # STEPS INSIDE THE JOB — executed in sequence
    # -----------------------------------------------------
    steps:

      - name: Checkout code
        uses: actions/checkout@v4      # Pulls your repository code into the runner
        # Without this step, the VM has NO code to build

      - name: Setup .NET SDK
        uses: actions/setup-dotnet@v3  # Installs the .NET SDK on the runner
        with:
          dotnet-version: '8.0.x'      # Specifies .NET version to install (8.x in this case)

      - name: Restore dependencies
        run: dotnet restore            # Downloads NuGet packages needed for your project

      - name: Build project
        run: dotnet build --configuration Release --no-restore
          # Builds your project in Release mode
        # --no-restore because restore was already done

      - name: Run tests (Only GithubActions project)
        run: dotnet test GithubActions/GithubActions.csproj --no-build --verbosity normal    
          
          # Executes all test projects in the solution
          # --no-build = saves time (already built)
        # verbosity normal shows readable console output